<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Traffic H4 App : ">

    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

	  <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
	  <script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
    <title>Magic Traffic</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          

          <h1 id="project_title">Traffic Magic <a id="forkme_banner" href="https://github.com/MagicTraffic/Traffic"> (GIT)</a></h1>
          <h2 id="project_tagline"></h2>
        </header>
    </div>


    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <p>
        <div class='jumbotron'>The traffic magic is a powerful tool that can help the municipal transport control departments and the smart city app developers to simulate the city traffic.</div>

        <h1 class='text-center'>
<a id="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Dream of every driver?</h1>
<img src="https://farm4.staticflickr.com/3435/5704436996_381e0005ef_b.jpg" alt="Traffic jam" style="width:600px;" class="center-block"/>
<br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />

<h1 class='text-center'> We believe NOT.</h1>


<br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />


<h1 class='text-center'> The typical reasons for traffic jams</h1>


<h3 class='text-center'><br>
1. Insufficient infrastructure <br><br>
2. Accidents and breakdowns <br><br>
3. Road work and reconstructions <br><br>
</h3>


<br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />




<div id="mapid" style="width: 700px; height: 500px"></div>


</p>



<p></p>

<p>The application is using open-source simulation suite for python <a href ="http://www.sumo.dlr.de/userdoc/Sumo_at_a_Glance.html">SUMO</a>, the data are warehouset in the <a href="https://m2x.att.com/">ATT M2X platform</a>, data are visualised using an open-source JavaScript library <a href="http://leafletjs.com/">Leaflet.JS</a></p><br>

<p></p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="bs-docs-footer">
      <footer class="bs-docs-footer">
        <p class="copyright">Traffic H4 App maintained by <a href="https://github.com/MagicTraffic">MagicTraffic</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>



    

  </body>
  
  
<script>

	var mymap = L.map('mapid').setView([50.092778, 14.437382], 13);
	var Circles = L.circle([50.092778, 14.437382], 0, {
	    color: '#f03',
	    fillOpacity: 1,
	    // 			      fillColor: '#f03'
	}).addTo(mymap);
	L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpandmbXliNDBjZWd2M2x6bDk3c2ZtOTkifQ._QA7i5Mpkd_m30IGElHziw', {
		maxZoom: 25,
		attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
			'<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
			'Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
		id: 'mapbox.streets'
	}).addTo(mymap);


	setInterval(function(){
		var getJSON = function(url, successHandler, errorHandler) {
			var xhr = typeof XMLHttpRequest != 'undefined'
				? new XMLHttpRequest()
				: new ActiveXObject('Microsoft.XMLHTTP');
			xhr.open('get', url, true);
			xhr.onreadystatechange = function() {
				var status;
				var data;
				// https://xhr.spec.whatwg.org/#dom-xmlhttprequest-readystate
				if (xhr.readyState == 4) { // `DONE`
					status = xhr.status;
					if (status == 200) {
						data = JSON.parse(xhr.responseText);
						successHandler && successHandler(data);
					} else {
						errorHandler && errorHandler(status);
					}
				}
			};
			xhr.send();
		};
		var url_source = ["http://api-m2x.att.com/v2/devices/f6792062cb048eeeaa5c3b3079d70e82/location/",
				  "http://api-m2x.att.com/v2/devices/1435efca54872bf96e5232fbcd670792/location/",
				  "http://api-m2x.att.com/v2/devices/a2ca89cef728499d5d0a299553db4f71/location/",
				  "http://api-m2x.att.com/v2/devices/6c0bf369abd9d920ddd8a85801944429/location/",
				  "http://api-m2x.att.com/v2/devices/1dcd9af8e1fea96903ba5a1f9ec1ae3b/location/",
				  "http://api-m2x.att.com/v2/devices/c2181b6165f7db6055bea53b7938fd60/location/",
				  "http://api-m2x.att.com/v2/devices/9a5bc79f86eedc092c86c09f4908c806/location/",
				  "http://api-m2x.att.com/v2/devices/cfa068e9d790388c2eb3d8839ca18b17/location/",
				  "http://api-m2x.att.com/v2/devices/de34e99d49cf8b36c5f23b9d7411d414/location/",
				  "http://api-m2x.att.com/v2/devices/3e9acead0a8584f99ed3aef0e41a14d5/location/"];

// 		for (var i=0; i < url_source.length; i++)  {
// 		    mymap.removeLayer(Circles);
// 		    }
// 		var color = ["#4f345a",
// 			     "#8fa998",
// 			     "#3b0c6d",
// 			     "#26a854",
// 			     "#005119",
// 			     "#351721",
// 			     "#8724f2",
// 			     "#ff0000",
// 			     "#66ffff",
// 			     "#ffcc66"];
// 		    

		
		for (var i = 0; i < url_source.length; i++) {
		    getJSON(url_source[i], function(data) {
		    
// 			console.log(data.latitude)
			
			  var Circles = L.circle([data.latitude, data.longitude], 5, {
				  color: '#03f',
// 				  opacity: 0.5,
// 				  fillOpacity: 1,
    // 			      fillColor: '#f03'
			  }).addTo(mymap);
			  
    // 		      mymap.on('zoomend', function() {
    // 			  var currentZoom = mymap.getZoom();
    // 			  Circles.setRadius(currentZoom);
    // 		      });
		    
		    }, function(status) {
// 			    alert('Something went wrong.');
		    });
		}
	}, 500);

</script>

</html>
